!function(){"use strict";const e={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},t=document.querySelector(".js-profile-title"),s=document.querySelector(".js-profile-description"),n=document.querySelector(".js-profile-modal-title"),o=document.querySelector(".js-profile-modal-description"),r=document.querySelector(".js-profile-edit-button"),i=document.forms.profileform,a=document.querySelector(".profile__add-button"),l=document.forms.newcardform,c=(document.querySelector("#title-image"),document.querySelector("#image-url"),document.querySelector(".js-card-list"));document.querySelectorAll(".modal__close");class u{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t,this._inputElements=[...this._form.querySelectorAll(this._inputSelector)]}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}toggleButtonState(){this._hasValidInputs(this._inputElements)?this.disableBtn():(this._submitBtn.classList.remove(this._inactiveButtonClass),this._submitBtn.disabled=!1)}disableBtn(){this._submitBtn.classList.add(this._inactiveButtonClass),this._submitBtn.disabled=!0}_hasValidInputs(e){return!e.every((e=>e.validity.valid))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_setEventListeners(){this._submitBtn=this._form.querySelector(this._submitButtonSelector),this.toggleButtonState(),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class m{constructor(e,t,s){this._name=e.name,this._link=e.link,this._handleImgClick=s,this._data=e,this._cardSelector=t,this._element=this._getTemplate(),this._likeBtn=this._element.querySelector(".card__like-button"),this._deleteBtn=this._element.querySelector(".card__trash-button"),this._cardImg=this._element.querySelector(".card__image")}generateCard(){return this._setEventListeners(),this._element}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._element.querySelector(".card__image").src=this._link,this._element.querySelector(".card__image").alt=this._name,this._element.querySelector(".card__text").textContent=this._name,this._likeBtn.addEventListener("click",(()=>{this._likeBtn.classList.toggle("card__like-button_active")})),this._deleteBtn.addEventListener("click",(()=>{this._element.remove()})),this._cardImg.addEventListener("click",(()=>{this._handleImgClick(this._data)}))}}class d{constructor(e){this._popupElement=document.querySelector(e)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.querySelector(".modal__close").addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("mousedown",(e=>{e.target.classList.contains("modal")&&this.close()}))}}class _ extends d{constructor(e,t){super(e),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t}_getInputValues(){const e=this._popupForm.querySelectorAll(".modal__input"),t={};return e.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this._popupForm.reset()}))}}const h=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=t}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{const t=p(e);h.addItem(t)}},c);function p(e){return new m(e,"#card-template",y).generateCard()}h.renderItems();const g=new class{constructor(e,t){this._name=e,this._job=t}getUserInfo(){return{name:this._name.textContent,job:this._job.textContent}}setUserInfo(e){let{newName:t,newJob:s}=e;t&&(this._name.textContent=t),s&&(this._job.textContent=s)}}(t,s),E=new _(".js-profile-edit-modal",(e=>{g.setUserInfo(e),E.close()}));E.setEventListeners(),r.addEventListener("click",(()=>{const{name:e,job:t}=g.getUserInfo();n.value=e,o.value=t,E.open(),f.toggleButtonState()}));const v=new _(".js-new-card-modal",(e=>{h.addItem(p(e)),v.close()}));v.setEventListeners(),a.addEventListener("click",(()=>{v.open(),b.toggleButtonState()}));const S=new class extends d{constructor(e){super(e),this._image=this._popupElement.querySelector(".modal__img-expand"),this._name=this._popupElement.querySelector(".modal__name-title")}open(e){this._image.src=e.link,this._image.alt=e.name,this._name.textContent=e.name,super.open()}close(){this._image.src="",this._image.alt="",this._name.textContent="",super.close()}}(".js-expand-img-modal");function y(e){S.open(e)}S.setEventListeners();const f=new u(e,i),b=new u(e,l);f.enableValidation(),b.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UW9CLEVBRW5DTSxFQUFZMUMsT0FDWjJDLEVBQXlCcEYsbUJBQW1CLElBSzlDLE1BQU1xRixFQUFlLElBQUluQyxFTEpNLHNCS0lvQ2pDLElBQ2pFMEMsRUFBZVUsUUFBUUksRUFBV3hELElBQ2xDb0UsRUFBYTFDLE9BQU8sSUFHdEIwQyxFQUFhdEMsb0JBSWIyQixFQUF3QjlELGlCQUFpQixTQUFTLEtBQ2hEeUUsRUFBYTVDLE9BQ2I2QyxFQUFxQnRGLG1CQUFtQixJQUsxQyxNQUFNdUYsRUFBYSxJR2hGSixjQUE2QmpELEVBQzFDM0QsV0FBQUEsQ0FBWTRELEdBQ1ZhLE1BQU1iLEdBQ056RCxLQUFLMEcsT0FBUzFHLEtBQUswRCxjQUFjM0UsY0FBYyxzQkFDL0NpQixLQUFLc0MsTUFBUXRDLEtBQUswRCxjQUFjM0UsY0FBYyxxQkFDaEQsQ0FFQTRFLElBQUFBLENBQUt4QixHQUNIbkMsS0FBSzBHLE9BQU9yRCxJQUFNbEIsRUFBS00sS0FDdkJ6QyxLQUFLMEcsT0FBT3BELElBQU1uQixFQUFLSSxLQUN2QnZDLEtBQUtzQyxNQUFNeEIsWUFBY3FCLEVBQUtJLEtBQzlCK0IsTUFBTVgsTUFDUixDQUVBRSxLQUFBQSxHQUNFN0QsS0FBSzBHLE9BQU9yRCxJQUFNLEdBQ2xCckQsS0FBSzBHLE9BQU9wRCxJQUFNLEdBQ2xCdEQsS0FBS3NDLE1BQU14QixZQUFjLEdBQ3pCd0QsTUFBTVQsT0FDUixHUnlENEIsd0JLTzlCLFNBQVNnQyxFQUFtQjFELEdBQzFCc0UsRUFBVzlDLEtBQUt4QixFQUNsQixDQUpBc0UsRUFBV3hDLG9CQVFYLE1BQU1xQyxFQUEyQixJQUFJMUcsRUFDbkNnRyxFQUNBQSxHQUVJWSxFQUF1QixJQUFJNUcsRUFDL0JnRyxFQUNBQSxHQUdGVSxFQUF5QnZFLG1CQUN6QnlFLEVBQXFCekUsa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vQ0FSRCBJTkZPUk1BVElPTlxyXG5cclxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG4vL1ZBTElEQVRJT05cclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcblxyXG4vL1BST0ZJTEUgSU5GT1JNQVRJT05cclxuXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmpzLXByb2ZpbGUtdGl0bGVcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLmpzLXByb2ZpbGUtZGVzY3JpcHRpb25cIlxyXG4pO1xyXG5cclxuLy9QUk9GSUxFIEVESVQgSU5GT1JNQVRJT05cclxuXHJcbmV4cG9ydCBjb25zdCB0aXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5qcy1wcm9maWxlLW1vZGFsLXRpdGxlXCIpO1xyXG5leHBvcnQgY29uc3QgZGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIuanMtcHJvZmlsZS1tb2RhbC1kZXNjcmlwdGlvblwiXHJcbik7XHJcblxyXG4vL1BST0ZJTEUgRURJVCBNT0RBTFxyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5qcy1wcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRNb2RhbCA9IFwiLmpzLXByb2ZpbGUtZWRpdC1tb2RhbFwiO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gZG9jdW1lbnQuZm9ybXMucHJvZmlsZWZvcm07XHJcblxyXG4vL0FERCBDQVJEIE1PREFMXHJcblxyXG5leHBvcnQgY29uc3QgYWRkTmV3Q2FyZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IG5ld0NhcmRTZWxlY3RvciA9IFwiLmpzLW5ldy1jYXJkLW1vZGFsXCI7XHJcbmV4cG9ydCBjb25zdCBuZXdDYXJkQWRkRm9ybSA9IGRvY3VtZW50LmZvcm1zLm5ld2NhcmRmb3JtO1xyXG5leHBvcnQgY29uc3QgaW1hZ2VUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGl0bGUtaW1hZ2VcIik7XHJcbmV4cG9ydCBjb25zdCBpbWFnZVVybCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2UtdXJsXCIpO1xyXG5cclxuLy9DQVJEIFRFTVBMQVRFXHJcblxyXG5leHBvcnQgY29uc3QgY2FyZExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmpzLWNhcmQtbGlzdFwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRTZWxlY3RvciA9IFwiI2NhcmQtdGVtcGxhdGVcIjtcclxuXHJcbi8vQUxMIENMT1NFIEJUTlNcclxuXHJcbmV4cG9ydCBjb25zdCBjbG9zZUJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19jbG9zZVwiKTtcclxuXHJcbi8vRVhQQU5EIElNRyBNT0RBTFxyXG5cclxuZXhwb3J0IGNvbnN0IGV4cGFuZEltZ01vZGFsID0gXCIuanMtZXhwYW5kLWltZy1tb2RhbFwiO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XHJcblxyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgLy8gI3NvbWUtaWQtZXJyb3JcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH1cclxuXHJcbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzVmFsaWRJbnB1dHModGhpcy5faW5wdXRFbGVtZW50cykpIHtcclxuICAgICAgdGhpcy5kaXNhYmxlQnRuKCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMuX3N1Ym1pdEJ0bi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnRuLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBkaXNhYmxlQnRuKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnRuLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdG4uZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgX2hhc1ZhbGlkSW5wdXRzKGlucHV0TGlzdCkge1xyXG4gICAgcmV0dXJuICFpbnB1dExpc3QuZXZlcnkoKGlucHV0RWxlbWVudCkgPT4gaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vdGhpcy5faW5wdXRFbGVtZW50cyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xyXG4gICAgdGhpcy5fc3VibWl0QnRuID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1nQ2xpY2spIHtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG5cclxuICAgIHRoaXMuX2hhbmRsZUltZ0NsaWNrID0gaGFuZGxlSW1nQ2xpY2s7XHJcbiAgICB0aGlzLl9kYXRhID0gZGF0YTtcclxuXHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcblxyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9saWtlQnRuID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fZGVsZXRlQnRuID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RyYXNoLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuX2NhcmRJbWcgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICByZXR1cm4gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGV4dFwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcblxyXG4gICAgdGhpcy5fbGlrZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9saWtlQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9kZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2NhcmRJbWcuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlSW1nQ2xpY2sodGhpcy5fZGF0YSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGUpID0+IHtcclxuICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBjb25zdCBjbG9zZUJ0biA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcclxuICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIChlKSA9PiB7XHJcbiAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbFwiKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dExpc3QgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XHJcbiAgICBjb25zdCBkYXRhID0ge307XHJcbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgZGF0YVtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiLy9JTVBPUlRTXHJcblxyXG5pbXBvcnQgKiBhcyBjb25zdGFudHMgZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuXHJcbi8vU0VDVElPTi5KU1xyXG5cclxuY29uc3QgY2FyZEdlbmVyYXRpb24gPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBpdGVtczogY29uc3RhbnRzLmluaXRpYWxDYXJkcyxcclxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoaXRlbSk7XHJcbiAgICAgIGNhcmRHZW5lcmF0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIGNvbnN0YW50cy5jYXJkTGlzdCAvLyBwYXNzaW5nIHRoZSBhbHJlYWR5IHNlbGVjdGVkIERPTSBlbGVtZW50XHJcbik7XHJcbmNhcmRHZW5lcmF0aW9uLnJlbmRlckl0ZW1zKCk7XHJcblxyXG4vL0NBUkQuSlNcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoZGF0YSkge1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoXHJcbiAgICBkYXRhLFxyXG4gICAgY29uc3RhbnRzLmNhcmRTZWxlY3RvcixcclxuICAgIGhhbmRsZVByZXZpZXdJbWFnZVxyXG4gICkuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG59XHJcblxyXG4vL1VTRVIgSU5GT1xyXG5cclxuY29uc3QgdXNlckluZm9ybWF0aW9uID0gbmV3IFVzZXJJbmZvKFxyXG4gIGNvbnN0YW50cy5wcm9maWxlVGl0bGUsXHJcbiAgY29uc3RhbnRzLnByb2ZpbGVEZXNjcmlwdGlvblxyXG4pO1xyXG5cclxuLy9FRElUIFBST0ZJTEUgUE9QVVBXSVRIRk9STS5KU1xyXG5cclxuY29uc3QgZWRpdFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybShjb25zdGFudHMucHJvZmlsZUVkaXRNb2RhbCwgKGRhdGEpID0+IHtcclxuICB1c2VySW5mb3JtYXRpb24uc2V0VXNlckluZm8oZGF0YSk7XHJcbiAgZWRpdFByb2ZpbGUuY2xvc2UoKTtcclxufSk7XHJcblxyXG5lZGl0UHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy9PUEVOIFBST0ZJTEUgRURJVCBNT0RBTFxyXG5cclxuY29uc3RhbnRzLnByb2ZpbGVFZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY29uc3QgeyBuYW1lLCBqb2IgfSA9IHVzZXJJbmZvcm1hdGlvbi5nZXRVc2VySW5mbygpO1xyXG5cclxuICBjb25zdGFudHMudGl0bGVJbnB1dC52YWx1ZSA9IG5hbWU7XHJcbiAgY29uc3RhbnRzLmRlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBqb2I7XHJcblxyXG4gIGVkaXRQcm9maWxlLm9wZW4oKTtcclxuICBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxufSk7XHJcblxyXG4vL0FERCBDQVJEIFBPUFVQV0lUSEZPUk0uSlNcclxuXHJcbmNvbnN0IG5ld0NhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKGNvbnN0YW50cy5uZXdDYXJkU2VsZWN0b3IsIChkYXRhKSA9PiB7XHJcbiAgY2FyZEdlbmVyYXRpb24uYWRkSXRlbShjcmVhdGVDYXJkKGRhdGEpKTtcclxuICBuZXdDYXJkUG9wdXAuY2xvc2UoKTtcclxufSk7XHJcblxyXG5uZXdDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vT1BFTiBBREQgQ0FSRCBNT0RBTFxyXG5cclxuY29uc3RhbnRzLmFkZE5ld0NhcmRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBuZXdDYXJkUG9wdXAub3BlbigpO1xyXG4gIGFkZENhcmRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbn0pO1xyXG5cclxuLy9QT1BVUFdJVEhJTUFHRS5KU1xyXG5cclxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShjb25zdGFudHMuZXhwYW5kSW1nTW9kYWwpO1xyXG5pbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVQcmV2aWV3SW1hZ2UoZGF0YSkge1xyXG4gIGltYWdlUG9wdXAub3BlbihkYXRhKTtcclxufVxyXG5cclxuLy9GT1JNVkFMSURBVE9SLkpTXHJcblxyXG5jb25zdCBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICBjb25zdGFudHMudmFsaWRhdGlvblNldHRpbmdzLFxyXG4gIGNvbnN0YW50cy5wcm9maWxlRWRpdEZvcm1cclxuKTtcclxuY29uc3QgYWRkQ2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICBjb25zdGFudHMudmFsaWRhdGlvblNldHRpbmdzLFxyXG4gIGNvbnN0YW50cy5uZXdDYXJkQWRkRm9ybVxyXG4pO1xyXG5cclxuZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYWRkQ2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXIpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG5cclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKG5hbWUsIGpvYikge1xyXG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLl9qb2IgPSBqb2I7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIGpvYjogdGhpcy5fam9iLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHsgbmV3TmFtZSwgbmV3Sm9iIH0pIHtcclxuICAgIGlmIChuZXdOYW1lKSB7XHJcbiAgICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBuZXdOYW1lO1xyXG4gICAgfVxyXG4gICAgaWYgKG5ld0pvYikge1xyXG4gICAgICB0aGlzLl9qb2IudGV4dENvbnRlbnQgPSBuZXdKb2I7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWctZXhwYW5kXCIpO1xyXG4gICAgdGhpcy5fbmFtZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19uYW1lLXRpdGxlXCIpO1xyXG4gIH1cclxuXHJcbiAgb3BlbihkYXRhKSB7XHJcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBcIlwiO1xyXG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gXCJcIjtcclxuICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbInZhbGlkYXRpb25TZXR0aW5ncyIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwicHJvZmlsZVRpdGxlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicHJvZmlsZURlc2NyaXB0aW9uIiwidGl0bGVJbnB1dCIsImRlc2NyaXB0aW9uSW5wdXQiLCJwcm9maWxlRWRpdEJ0biIsInByb2ZpbGVFZGl0Rm9ybSIsImZvcm1zIiwicHJvZmlsZWZvcm0iLCJhZGROZXdDYXJkQnRuIiwibmV3Q2FyZEFkZEZvcm0iLCJuZXdjYXJkZm9ybSIsImNhcmRMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsIkZvcm1WYWxpZGF0b3IiLCJjb25zdHJ1Y3RvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJ0aGlzIiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9mb3JtIiwiX2lucHV0RWxlbWVudHMiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvckVsZW1lbnQiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJyZW1vdmUiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsIl9oYXNWYWxpZElucHV0cyIsImRpc2FibGVCdG4iLCJfc3VibWl0QnRuIiwiZGlzYWJsZWQiLCJpbnB1dExpc3QiLCJldmVyeSIsInZhbGlkaXR5IiwidmFsaWQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlbmFibGVWYWxpZGF0aW9uIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJDYXJkIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltZ0NsaWNrIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2hhbmRsZUltZ0NsaWNrIiwiX2RhdGEiLCJfY2FyZFNlbGVjdG9yIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfbGlrZUJ0biIsIl9kZWxldGVCdG4iLCJfY2FyZEltZyIsImdlbmVyYXRlQ2FyZCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJzcmMiLCJhbHQiLCJ0b2dnbGUiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50Iiwib3BlbiIsIl9oYW5kbGVFc2NDbG9zZSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImUiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJyZXNldCIsImNhcmRHZW5lcmF0aW9uIiwiX3JlZiIsImNvbnRhaW5lciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiY2FyZEVsZW1lbnQiLCJjcmVhdGVDYXJkIiwiY29uc3RhbnRzIiwiaGFuZGxlUHJldmlld0ltYWdlIiwidXNlckluZm9ybWF0aW9uIiwiam9iIiwiX2pvYiIsImdldFVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJuZXdOYW1lIiwibmV3Sm9iIiwiZWRpdFByb2ZpbGUiLCJlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJuZXdDYXJkUG9wdXAiLCJhZGRDYXJkRm9ybVZhbGlkYXRvciIsImltYWdlUG9wdXAiLCJfaW1hZ2UiXSwic291cmNlUm9vdCI6IiJ9